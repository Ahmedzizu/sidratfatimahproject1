// src/scss/halls.scss - ملف CSS محسّن لبطاقات الشاليهات والقاعات

// Color Variables
$primary-color: #D4AF37; // اللون الذهبي الرئيسي
$secondary-color: #B38D46; // اللون الذهبي الثانوي
$dark-bg: #121212; // الخلفية الداكنة للصفحة
$card-bg: #1E1E1E; // خلفية البطاقات
$light-text: #F5F5F5; // لون النص الفاتح
$text-subtle: rgba($light-text, 0.7); // لون نص فرعي خفيف (أكثر شفافية قليلاً)
$border-color: rgba(212, 175, 55, 0.4); // لون الحدود الذهبية الشفافة (أكثر وضوحاً)
$highlight-color-light: rgba($primary-color, 0.08); // لون خلفية العناصر المميزة الخفيفة (أكثر تشبعاً)
$highlight-color-medium: rgba($primary-color, 0.15); // لون خلفية العناصر المميزة المتوسطة

// ألوان حالات الحجز والرسائل
$status-available-morning: #66BB6A; // أخضر فاتح للصباح
$status-available-night: #FFB300; // أصفر/برتقالي للمساء
$status-available-both: #4CAF50; // أخضر غامق لكلا الفترتين
$status-not-available: #EF5350; // أحمر للحجز الكامل
$status-maintenance: #FF9800; // برتقالي للصيانة
$status-unknown: #9E9E9E; // رمادي للمجهول
$snackbar-success: #4CAF50;
$snackbar-error: #F44336;
$snackbar-warning: #FF9800;
$snackbar-info: #2196F3;

// قيم RGB المقابلة للمتغيرات (لاستخدامها في rgba())
$primary-rgb: 212, 175, 55;
$secondary-rgb: 179, 141, 70;
$dark-bg-rgb: 18, 18, 18;
$light-text-rgb: 245, 245, 245;

// ==============================================
// تعريف متغيرات الاتجاه العالمية هنا (لحل مشكلة "Undefined variable")
// ==============================================
$dir-left: left;
$dir-right: right;

// أنيميشنات
@keyframes fadeInSlideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes cardPopIn {
  from {
    opacity: 0;
    transform: scale(0.95);
    box-shadow: 0 0 0 rgba(0, 0, 0, 0.7);
  }

  to {
    opacity: 1;
    transform: scale(1);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.8);
  }
}

@keyframes glowBorder {
  0% {
    box-shadow: 0 0 0 0 rgba($primary-color, 0.3);
  }

  50% {
    box-shadow: 0 0 0 5px rgba($primary-color, 0.1);
  }

  100% {
    box-shadow: 0 0 0 0 rgba($primary-color, 0);
  }
}

@keyframes starPulse {
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.1);
  }

  100% {
    transform: scale(1);
  }
}

@keyframes flashRed {

  0%,
  100% {
    background-color: rgba($status-not-available, 0.7);
  }

  50% {
    background-color: rgba($status-not-available, 0.9);
  }
}

@keyframes flashOrange {

  0%,
  100% {
    background-color: rgba($status-maintenance, 0.7);
  }

  50% {
    background-color: rgba($status-maintenance, 0.9);
  }
}

// ---------------------------------------------------
// الأساسيات العامة للصفحة (للمكونين Chalets و Halls)
// ---------------------------------------------------
.chalet-page-container {
  background-color: $dark-bg;
  color: $light-text;
  font-family: 'Tajawal', sans-serif;
  min-height: 100vh;
  padding: 40px 20px;
  padding-top: calc(40px + 65px);
  animation: fadeInSlideUp 0.8s ease-out forwards;
  display: flex;
  flex-direction: column;
  align-items: center;
  max-width: 1400px;
  margin: 0 auto;

  .loading-message,
  .no-results-message {
    color: $text-subtle;
    font-size: 1.6rem; // خط أكبر قليلاً
    font-weight: 600; // أكثر سمكاً
    margin-top: 50px;
    text-align: center;
    width: 100%;
  }

  // قسم منتقي التاريخ
  .calendar-filter-section {
    margin-bottom: 40px;

    .date-picker-input {
      background-color: $card-bg;
      color: $light-text;
      border: 2px solid rgba($primary-color, 0.6); // حدود أكثر وضوحاً
      border-radius: 12px; // حواف أكثر استدارة
      padding: 14px 25px; // بادينج أكبر
      font-size: 1.2rem; // خط أكبر
      width: 100%;
      max-width: 320px; // عرض أكبر قليلاً
      text-align: center;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4); // ظل أكبر
      transition: all 0.3s ease;
      font-weight: 500; // وزن خط متوسط

      &:focus {
        outline: none;
        border-color: $primary-color;
        box-shadow: 0 0 15px rgba($primary-color, 0.8); // توهج أكبر عند التركيز
      }
    }

    .datepicker-rtl {
      // ... (keep existing RTL styles for datepicker if needed)
    }
  }

  // شبكة البطاقات
  .chalets-grid {
    width: 100%;
    justify-content: center;

    .MuiGrid-item {
      display: flex;
      justify-content: center;
      align-items: stretch;
      // animation: fadeInSlideUp 0.6s ease-out both; // يمكن إزالته أو تعديله لتأثير ظهور متتالٍ
      // &:nth-child(3n+1) { animation-delay: 0.1s; } // مثال
      // &:nth-child(3n+2) { animation-delay: 0.2s; }
      // &:nth-child(3n+3) { animation-delay: 0.3s; }
    }
  }

  // بطاقة الشاليه/القاعة
  .chalet-card {
    background-color: $card-bg;
    border-radius: 20px; // حواف أكثر استدارة للبطاقة
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5); // ظل أقوى
    border: 2px solid rgba($border-color, 0.6); // حدود أكثر سمكاً ووضوحاً
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    width: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;

    .card-action-area {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    &:hover:not(.disabled-card) {
      transform: translateY(-12px) scale(1.03); // حركة أكبر
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8); // ظل أقوى بكثير
      border-color: $primary-color; // توهج قوي للحدود

      .card-title {
        color: $primary-color; // ابقاء اللون الأساسي
        text-shadow: 0 0 20px rgba($primary-color, 1); // توهج نص العنوان
      }

      .card-image {
        filter: brightness(1.1); // الصورة تصبح أكثر إشراقاً
      }
    }

    &.disabled-card {
      opacity: 0.5; // تعتيم أكثر
      cursor: not-allowed;
      filter: grayscale(90%); // رمادي أكثر

      .card-action-area {
        pointer-events: none;
      }
    }

    .maintenance-badge {
      position: absolute;
      top: 20px; // مسافة أكبر
      #{$dir-left}: 20px;
      background-color: rgba($status-maintenance, 0.9); // لون أوضح
      color: $light-text;
      padding: 10px 18px; // بادينج أكبر
      border-radius: 25px; // استدارة أكبر
      font-size: 1rem; // خط أكبر
      font-weight: 700; // سمك أكبر
      display: flex;
      align-items: center;
      gap: 10px; // مسافة أكبر بين الأيقونة والنص
      z-index: 2;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      animation: flashOrange 1.8s infinite alternate ease-in-out; // أنيميشن أبطأ وأكثر سلاسة

      .badge-icon {
        font-size: 1.4rem; // أيقونة أكبر
      }
    }

    .fully-booked-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba($status-not-available, 0.9); // لون أوضح
      display: flex;
      justify-content: center;
      align-items: center;
      color: $light-text;
      font-size: 2rem; // خط أكبر بكثير
      font-weight: 900; // أكثر سمكاً
      border-radius: 20px;
      z-index: 3;
      text-shadow: 0 3px 15px rgba(0, 0, 0, 0.8); // ظل نص أقوى
      backdrop-filter: blur(5px); // ضبابية أكبر
      animation: flashRed 1.8s infinite alternate ease-in-out; // أنيميشن أبطأ وأكثر سلاسة
    }

    .card-image {
      object-fit: cover;
      width: 100%;
      height: 250px; // ارتفاع أعلى للصور
      border-top-left-radius: 18px; // تتناسق مع حواف البطاقة
      border-top-right-radius: 18px;
      filter: brightness(0.75) contrast(1.05); // تباين وإعتام بسيط للصور
      transition: filter 0.4s ease;
    }

    .card-content {
      padding: 25px !important; // بادينج أكبر للمحتوى
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;

      .card-title {
        color: $primary-color;
        font-size: 1.8rem; // **خط العنوان أكبر**
        font-weight: 800; // **أكثر سمكاً**
        margin-bottom: 15px; // مسافة أكبر
        display: flex;
        flex-direction: column; // **جعل الاسم والتقييم يتكدسان عمودياً**
        align-items: flex-start; // **محاذاة لليسار افتراضياً**
        text-shadow: 0 0 10px rgba($primary-color, 0.5); // ظل نص أقوى
        transition: color 0.3s ease, text-shadow 0.3s ease;

        .chalet-name-display {
          // **كلاس جديد لاسم الشاليه**
          font-size: 1.8rem; // حجم الخط لاسم الشاليه
          font-weight: 800; // سمك الخط لاسم الشاليه
          color: $primary-color;
          margin-bottom: 5px; // مسافة بين الاسم والتقييم
          line-height: 1.2; // تحسين تباعد الأسطر
        }
      }

      .card-rating {
        display: flex;
        align-items: center;
        gap: 5px; // مسافة أكبر بين النجوم
        margin-top: 5px; // مسافة إضافية من العنوان

        .star-icon {
          color: $text-subtle;
          font-size: 1.2rem; // أيقونات نجوم أكبر

          &.filled {
            color: $primary-color;
            animation: starPulse 1.2s ease-in-out infinite; // أنيميشن أبطأ
          }
        }

        .rating-count {
          color: $text-subtle;
          font-size: 0.95rem; // **خط التقييم أكبر**
          font-weight: 500;
          margin-inline-start: 8px; // مسافة أكبر
          white-space: nowrap; // منع انقسام النص
        }
      }

      .availability-info {
        margin-bottom: 20px; // مسافة أكبر
        font-weight: 700; // أكثر سمكاً
        display: flex;
        gap: 12px; // مسافة أكبر بين الفترات
        flex-wrap: wrap;

        .availability-status {
          padding: 8px 15px; // بادينج أكبر
          border-radius: 25px;
          font-size: 1rem; // خط أكبر
          display: inline-flex;
          align-items: center;
          gap: 8px; // مسافة أكبر بين الأيقونة والنص
          white-space: nowrap;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); // ظل خفيف

          &.available-morning,
          &.available-night,
          &.available-both {
            // إضافة تأثير لمعان خفيف للتوفر
            background: linear-gradient(45deg, rgba($primary-color, 0.1), rgba($primary-color, 0.05));
            border: 1px solid rgba($primary-color, 0.5);

            .MuiSvgIcon-root {
              filter: drop-shadow(0 0 3px rgba($primary-color, 0.6)); // توهج للأيقونة
            }
          }
        }
      }

      .card-details-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px; // مسافة أكبر
        font-size: 1rem; // خط أكبر
        color: $light-text; // اللون الأساسي أغمق قليلاً
        flex-wrap: wrap;

        div {
          display: flex;
          align-items: center;
          gap: 8px; // مسافة أكبر بين الأيقونة والنص
          flex-shrink: 0;
          font-weight: 600; // أكثر سمكاً
        }

        .detail-icon {
          font-size: 1.3rem; // أيقونات أكبر
          color: $primary-color;
          filter: drop-shadow(0 0 4px rgba($primary-color, 0.5)); // توهج بسيط للأيقونات
        }

        .price-info {
          font-weight: 800; // أكثر سمكاً

          .price-value {
            font-size: 1.6rem; // خط السعر أكبر
            color: $primary-color;
            text-shadow: 0 0 8px rgba($primary-color, 0.5); // ظل نص السعر
          }

          .price-unit {
            font-size: 1rem; // خط الوحدة أكبر
            color: $text-subtle;
          }
        }

        .location-info,
        .area-info {

          // تم حذف .capacity-info لأنها تعالج في HTML
          span {
            color: $light-text; // لون نص ثابت
          }
        }

        .capacity-info {

          // **تنسيق خاص للسعة لمعالجة N/A فرد**
          span {
            color: $light-text;

            &:last-child {
              // النص بعد القيمة (مثل "فرد")
              font-weight: 500; // أخف قليلاً
              color: $text-subtle;
            }
          }
        }
      }
    }
  }

  // تحكمات التقسيم (Pagination)
  .pagination-controls {
    margin-top: 60px; // مسافة أكبر
    display: flex;
    justify-content: center;

    .MuiPaginationItem-root {
      color: $light-text;
      border: 1px solid rgba($primary-color, 0.4); // حدود أوضح
      border-radius: 10px; // حواف مستديرة
      transition: all 0.3s ease;
      font-size: 1.1rem; // خط أكبر
      padding: 8px 14px; // بادينج أكبر

      &.Mui-selected {
        background-color: $primary-color;
        color: $dark-bg;
        font-weight: 800; // أكثر سمكاً
        box-shadow: 0 6px 20px rgba($primary-color, 0.6); // ظل أقوى
      }

      &:hover:not(.Mui-selected) {
        background-color: rgba($primary-color, 0.15); // خلفية أغمق عند التحويم
        color: $primary-color;
        transform: translateY(-2px); // رفع بسيط
      }
    }
  }
}


/* ============================================== */
/* *** GLOBAL RTL (Right-to-Left) Adjustments *** */
/* ============================================== */
[dir="rtl"] {
  .chalet-page-container {
    .calendar-filter-section {
      .date-picker-input {
        text-align: right;
      }
    }

    .chalet-card {
      .maintenance-badge {
        #{$dir-left}: auto;
        #{$dir-right}: 20px; // تعديل المسافة لـ RTL
      }

      .card-content {
        .card-title {
          flex-direction: column; // اسم وتقييم متكدسين عمودياً
          align-items: flex-end; // **محاذاة لليمين**
        }

        .card-rating {
          flex-direction: row-reverse; // عكس ترتيب النجوم

          .rating-count {
            margin-inline-start: 0;
            margin-inline-end: 8px; // تعديل المسافة لـ RTL
          }
        }

        .availability-info {
          // Flexbox direction 'row' is usually fine for RTL unless wrapping behavior needs specific adjustment.
        }

        .card-details-row {
          flex-direction: row-reverse; // لعكس ترتيب عناصر التفاصيل
        }
      }
    }

    .pagination-controls {
      direction: ltr; // حافظ على LTR للترقيم
    }
  }
}


/* ============================================== */
/* *** RESPONSIVE STYLES *** */
/* ============================================== */
@media (max-width: 1200px) {
  .chalet-page-container {
    padding: 30px 15px;
    padding-top: calc(30px + 60px);

    .chalet-card {
      .card-image {
        height: 220px; // ارتفاع الصورة
      }

      .card-content {
        padding: 20px !important;

        .card-title {
          font-size: 1.6rem;

          .chalet-name-display {
            font-size: 1.6rem;
          }

          // حجم خط الاسم
        }

        .card-rating {
          .star-icon {
            font-size: 1.1rem;
          }

          .rating-count {
            font-size: 0.85rem;
          }

          // حجم خط التقييم
        }

        .availability-info {
          font-size: 0.9rem;
        }

        .card-details-row {
          font-size: 0.95rem;

          .price-value {
            font-size: 1.4rem;
          }

          .price-unit {
            font-size: 0.9rem;
          }

          .detail-icon {
            font-size: 1.2rem;
          }
        }
      }
    }
  }
}

@media (max-width: 992px) {
  .chalet-page-container {
    padding: 25px 15px;
    padding-top: calc(25px + 55px);

    .chalet-card {
      .card-image {
        height: 200px;
      }

      .card-content {
        .card-title {
          font-size: 1.5rem;

          .chalet-name-display {
            font-size: 1.5rem;
          }
        }

        .availability-info {
          font-size: 0.85rem;
        }

        .card-details-row {
          font-size: 0.9rem;

          .price-value {
            font-size: 1.3rem;
          }
        }
      }
    }
  }
}

@media (max-width: 768px) {
  .chalet-page-container {
    padding: 20px 10px;
    padding-top: calc(20px + 50px);

    .calendar-filter-section {
      .date-picker-input {
        max-width: 280px;
      }
    }

    .chalet-card {
      .card-image {
        height: 180px;
      }

      .card-content {
        padding: 18px !important;

        .card-title {
          font-size: 1.3rem;

          // تم ترك flex-direction: column هنا ليتكدسوا دائماً
          .chalet-name-display {
            font-size: 1.3rem;
          }

          .card-rating {
            margin-top: 5px; // مسافة بعد العنوان
          }
        }

        .availability-info {
          font-size: 0.8rem;
          gap: 8px;
        }

        .card-details-row {
          font-size: 0.85rem;

          .price-value {
            font-size: 1.2rem;
          }
        }
      }

      .maintenance-badge,
      .fully-booked-overlay {
        font-size: 1.1rem;
        padding: 8px 15px;
      }
    }
  }

  [dir="rtl"] {
    .chalet-page-container {
      .chalet-card {
        .card-content {
          .card-title {
            align-items: flex-end; // محاذاة لليمين
          }
        }
      }
    }
  }
}

@media (max-width: 576px) {
  .chalet-page-container {
    padding: 15px 10px;
    padding-top: calc(15px + 50px);

    .calendar-filter-section {
      .date-picker-input {
        max-width: 240px;
        padding: 12px 20px;
        font-size: 1.1rem;
      }
    }

    .chalet-card {
      .card-image {
        height: 160px;
      }

      .card-content {
        padding: 15px !important;

        .card-title {
          font-size: 1.2rem;

          .chalet-name-display {
            font-size: 1.2rem;
          }
        }

        .availability-info {
          font-size: 0.7rem;
          gap: 6px;
          padding: 5px 10px;
        }

        .card-details-row {
          flex-direction: column;
          align-items: flex-start;
          font-size: 0.8rem;
          gap: 4px;
        }
      }

      .maintenance-badge,
      .fully-booked-overlay {
        font-size: 1rem;
        padding: 6px 12px;
        top: 15px;
        #{$dir-left}: 15px;
      }
    }
  }

  [dir="rtl"] {
    .chalet-page-container {
      .chalet-card {
        .card-content {
          .card-details-row {
            align-items: flex-end;
          }
        }

        .maintenance-badge,
        .fully-booked-overlay {
          #{$dir-left}: auto;
          #{$dir-right}: 15px;
        }
      }
    }
  }
}