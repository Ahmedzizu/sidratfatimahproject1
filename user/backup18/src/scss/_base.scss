// src/scss/_base.scss
// هذا الملف يحتوي على الأنماط الأساسية والعامة للتطبيق، ومتغيرات CSS الجذرية، وتجاوزات المكتبات العالمية.

@import 'variables'; // استيراد متغيرات SCSS
@import 'animations'; // استيراد الـ keyframes (التي تستخدم متغيرات SCSS)

// 1. تعريف متغيرات CSS الجذرية (باستخدام متغيرات SCSS)
:root {
    --primary: #{$primary-color-sass}; // ✨ تم التعديل
    --secondary: #{$secondary-color-sass}; // ✨ تم التعديل
    --dark-bg: #{$background-color-sass}; // ✨ تم التعديل
    --text-color: #{$light-color-sass}; // ✨ تم التعديل
    --card-bg: #{$card-background-sass}; // ✨ تم التعديل
    --nav-height: #{$nav-height-sass}; // ✨ تم التعديل
    --nav-height-scrolled: #{$nav-height-scrolled-sass}; // ✨ تم التعديل
    --glow-color: #{$glow-color-sass}; // ✨ تم التعديل
    --darker-element-bg: #{$darker-element-bg-sass}; // ✨ تم التعديل
    --user-icon-bg: #{$user-icon-bg-sass}; // ✨ تم التعديل
    --off-white-text: #{$off-white-text-sass}; // ✨ تم التعديل
    --border: #{$border-color-sass}; // ✨ تم التعديل
    --status-available: #{$status-available-sass}; // ✨ تم التعديل
    --status-unavailable: #{$status-unavailable-sass}; // ✨ تم التعديل
    --status-unknown: #{$status-unknown-sass}; // ✨ تم التعديل

    // متغيرات RGB لـ CSS (للاستخدام مع rgba())
    --primary-rgb: #{$primary-rgb-sass}; // ✨ تم التعديل
    --dark-bg-rgb: #{$dark-bg-rgb-sass}; // ✨ تم التعديل
    --off-white-text-rgb: #{$off-white-text-rgb-sass}; // ✨ تم التعديل
    --darker-element-bg-rgb: #{$darker-element-bg-rgb-sass}; // ✨ تم التعديل
    --light-color-rgb: #{$light-color-rgb-sass}; // ✨ جديد: لاستخدامها في react-datepicker

}

// 2. أنماط BODY الأساسية
body {
    font-family: 'Tajawal', sans-serif;
    background-color: var(--dark-bg);
    color: var(--text-color);
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    overflow-x: hidden;
}

// Global anchor styles
a {
    text-decoration: none !important;
    color: unset;
}

// Global Scrollbar styling
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background-color: var(--dark-bg);
}

::-webkit-scrollbar-thumb {
    background-color: var(--primary);
    border-radius: 40px;
    border: 2px solid var(--secondary);
}

// 3. GLOBAL MUI OVERRIDES (تجاوزات المكتبات العالمية)
// تم نقل جميع أنماط MUI العامة هنا من ملفات SCSS الأخرى
.MuiInputBase-root,
.MuiOutlinedInput-root,
.MuiFilledInput-root {
    background-color: var(--darker-element-bg) !important;
    color: var(--off-white-text) !important;
    font-family: 'Tajawal', sans-serif !important;
    border-radius: 8px !important;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3) !important;
    margin: 10px 0 !important;

    .MuiOutlinedInput-notchedOutline {
        border-color: rgba(var(--primary-rgb), 0.3) !important;
        transition: all 0.3s ease;
    }

    &:hover .MuiOutlinedInput-notchedOutline {
        border-color: rgba(var(--primary-rgb), 0.6) !important;
    }

    &.Mui-focused .MuiOutlinedInput-notchedOutline {
        border-color: var(--primary) !important;
        box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.3) !important;
    }

    input {
        color: var(--off-white-text) !important;
        text-align: right;
        padding-right: 14px;

        &::placeholder {
            color: rgba(var(--off-white-text-rgb), 0.6) !important;
            opacity: 1;
        }
    }
}

.MuiFormLabel-root {
    color: var(--off-white-text) !important;
    font-family: 'Tajawal', sans-serif !important;
    text-align: right;

    &.Mui-focused {
        color: var(--primary) !important;
    }

    &.Mui-disabled {
        color: rgba(var(--off-white-text-rgb), 0.5) !important;
    }
}

.MuiFormHelperText-root {
    color: var(--status-unavailable) !important;
    font-size: 0.75rem !important;
    margin-top: 4px !important;
    text-align: right !important;
    margin-left: 0 !important;
    margin-right: 14px !important;
}

// Global Radio buttons group
.MuiFormGroup-root {
    justify-content: center !important;
    margin: 30px 0 !important;
    flex-direction: row-reverse !important;

    .MuiFormControlLabel-root {
        .MuiTypography-root {
            color: var(--off-white-text) !important;
            font-family: 'Tajawal', sans-serif !important;
        }
    }
}

// Global MUI Button styles (for contained buttons primarily)
.MuiButton-root {
    font-weight: 700 !important;
    font-size: 1rem !important;
    border-radius: 30px !important;
    padding: 12px 25px !important;
    transition: all 0.3s ease !important;
    font-family: 'Tajawal', sans-serif !important;

    &.MuiButton-containedPrimary {
        background-color: var(--primary) !important;
        color: var(--dark-bg) !important;
        box-shadow: 0 5px 20px rgba(var(--primary-rgb), 0.4) !important;

        &:hover {
            background-color: darken($primary-color-sass, 8%) !important; // ✨ استخدام Sass variable
            box-shadow: 0 8px 25px rgba(var(--primary-rgb), 0.6) !important;
            transform: translateY(-3px);
        }
    }

    &.MuiButton-outlinedPrimary {
        border: 2px solid var(--primary) !important;
        color: var(--primary) !important;
        background-color: transparent !important;
        box-shadow: 0 2px 8px rgba(var(--primary-rgb), 0.2) !important;

        &:hover {
            background-color: rgba(var(--primary-rgb), 0.1) !important;
            border-color: darken($primary-color-sass, 8%) !important; // ✨ استخدام Sass variable
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(var(--primary-rgb), 0.3) !important;
        }
    }

    &.MuiButton-containedError {
        background-color: var(--status-unavailable) !important;
        color: var(--dark-bg) !important;
        box-shadow: 0 5px 20px rgba(var(--status-unavailable-rgb), 0.4) !important; // ✨ استخدام RGB variable

        &:hover {
            background-color: darken($status-unavailable-sass, 8%) !important; // ✨ استخدام Sass variable
            box-shadow: 0 8px 25px rgba(var(--status-unavailable-rgb), 0.6) !important; // ✨ استخدام RGB variable
            transform: translateY(-3px);
        }
    }

    &:disabled {
        opacity: 0.6 !important;
        background-color: rgba(var(--darker-element-bg-rgb), 0.5) !important;
        color: rgba(var(--off-white-text-rgb), 0.5) !important;
        transform: none !important;
        box-shadow: none !important;
        cursor: not-allowed;
    }
}

// Global Radio button selected color
.MuiRadio-root.Mui-checked {
    color: var(--primary) !important;
}

// Global Circular Progress (Loading spinner)
.MuiCircularProgress-root {
    color: var(--primary) !important;
    height: 50px !important;
    width: 50px !important;
}

// Global typography styles for messages (Loading, No Data, etc.)
.MuiTypography-root[style*="text-align: center"],
.MuiTypography-root.MuiAlert-message {
    color: var(--off-white-text) !important;
    margin-top: 30px !important;
    font-size: 1.2rem !important;
    animation: fadeIn 0.8s ease-out;
    font-family: 'Tajawal', sans-serif !important;
    text-align: center;
}

// Global styles for Snackbar Alert background/text
.MuiAlert-root {
    background-color: var(--darker-element-bg) !important;
    color: var(--off-white-text) !important;
    border: 1px solid var(--border) !important;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4) !important;
    border-radius: 10px !important;

    .MuiAlert-icon {
        color: var(--primary) !important;
    }

    &.MuiAlert-filledSuccess {
        background-color: var(--status-available) !important;
        color: var(--dark-bg) !important;

        .MuiAlert-icon {
            color: var(--dark-bg) !important;
        }
    }

    &.MuiAlert-filledError {
        background-color: var(--status-unavailable) !important;
        color: var(--dark-bg) !important;

        .MuiAlert-icon {
            color: var(--dark-bg) !important;
        }
    }

    &.MuiAlert-filledWarning {
        background-color: var(--primary) !important;
        color: var(--dark-bg) !important;

        .MuiAlert-icon {
            color: var(--dark-bg) !important;
        }
    }

    &.MuiAlert-filledInfo {
        background-color: var(--darker-element-bg) !important;
        color: var(--off-white-text) !important;

        .MuiAlert-icon {
            color: var(--off-white-text) !important;
        }
    }
}


// 4. Global React Datepicker overrides (تم تجميعها هنا)
.react-datepicker {
    background-color: var(--darker-element-bg) !important;
    border: 1px solid var(--primary) !important;
    border-radius: 15px !important;
    font-family: 'Tajawal', sans-serif !important;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7) !important;

    &__header {
        background-color: darken($primary-color-sass, 10%) !important; // ✨ استخدام Sass variable
        border-bottom: none !important;
        padding-top: 15px !important;
        color: var(--light-color) !important;
    }

    &__current-month,
    &__day-name {
        color: var(--light-color) !important;
        font-weight: bold !important;
    }

    &__navigation {
        top: 10px !important;

        &-icon::before {
            border-color: var(--light-color) !important;
        }
    }

    &__day {
        width: 40px !important;
        height: 40px !important;
        line-height: 40px !important;
        margin: 3px !important;
        border-radius: 50% !important;
        color: var(--light-color) !important;
        transition: all 0.2s ease;

        &:hover {
            background-color: rgba(var(--primary-rgb), 0.3) !important;
            color: var(--light-color) !important;
        }

        &--selected {
            background-color: var(--primary) !important;
            color: var(--dark-bg) !important;
            font-weight: bold !important;
        }

        &--keyboard-selected {
            background-color: rgba(var(--primary-rgb), 0.5) !important;
        }

        &--disabled {
            color: rgba(var(--light-color-rgb), 0.4) !important;
            text-decoration: line-through;
        }
    }
}

// 5. Global React-Phone-Input-2 overrides (تم تجميعها هنا)
.react-phone-input {
    direction: ltr !important;
    font-family: 'Tajawal', sans-serif;
    margin: 10px 0;

    .form-control {
        width: 100% !important;
        height: 56px !important;
        background-color: var(--darker-element-bg) !important;
        color: var(--off-white-text) !important;
        border-radius: 8px !important;
        border: 1px solid rgba(var(--primary-rgb), 0.4) !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4) !important;
        padding: 16.5px 14px 16.5px 50px !important;
        font-size: 1rem;

        &::-ms-reveal,
        &::-webkit-contacts-auto-fill-button {
            display: none !important;
        }

        &:focus {
            border-color: var(--primary) !important;
            box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.3) !important;
        }
    }

    .flag-dropdown {
        background-color: var(--darker-element-bg) !important;
        border: 1px solid rgba(var(--primary-rgb), 0.4) !important;
        border-right: none !important;
        border-top-left-radius: 8px !important;
        border-bottom-left-radius: 8px !important;

        .selected-flag {
            background-color: transparent !important;
            filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.5));

            &:hover,
            &:focus {
                background-color: rgba(var(--primary-rgb), 0.1) !important;
            }

            .flag {
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }
        }

        .arrow {
            border-color: var(--off-white-text) !important;
        }

        .arrow.up {
            border-bottom-color: var(--off-white-text) !important;
        }

        .arrow.down {
            border-top-color: var(--off-white-text) !important;
        }
    }

    .country-list {
        background-color: var(--darker-element-bg) !important;
        color: var(--off-white-text) !important;
        border: 1px solid rgba(var(--primary-rgb), 0.4) !important;
        max-height: 250px;
        overflow-y: auto;
        z-index: 1001;

        .country {
            background-color: var(--darker-element-bg) !important;
            color: var(--off-white-text) !important;
            padding: 10px 15px;

            &:hover {
                background-color: rgba(var(--primary-rgb), 0.1) !important;
            }

            &.highlight {
                background-color: rgba(var(--primary-rgb), 0.2) !important;
            }

            .dial-code {
                color: var(--primary) !important;
                font-weight: bold;
            }
        }

        .search-box {
            background-color: var(--dark-bg) !important; // ✨ استخدام var(--dark-bg)
            border: 1px solid var(--border) !important;
            color: var(--off-white-text) !important;
            padding: 8px 10px;
            width: calc(100% - 20px);
            margin: 10px;
            border-radius: 5px;
            font-size: 0.9rem;

            &::placeholder {
                color: rgba(var(--off-white-text-rgb), 0.6) !important;
            }
        }
    }
}


// RTL adjustments for global elements
[dir="rtl"] {
    .MuiInputBase-root {
        input {
            text-align: right !important;
        }
    }

    .MuiFormLabel-root {
        text-align: right !important;
    }

    .MuiFormHelperText-root {
        text-align: left !important;
        margin-left: 0 !important;
        margin-right: 14px !important;
    }

    .MuiFormGroup-root {
        flex-direction: row-reverse !important;
    }

    .react-phone-input {
        direction: rtl !important;

        .form-control {
            padding: 16.5px 50px 16.5px 14px !important;
            text-align: right !important;
        }

        .flag-dropdown {
            border-right: 1px solid rgba(var(--primary-rgb), 0.4) !important;
            border-left: none !important;
            border-top-left-radius: 0 !important;
            border-top-right-radius: 8px !important;
            border-bottom-left-radius: 0 !important;
            border-bottom-right-radius: 8px !important;
        }
    }
}